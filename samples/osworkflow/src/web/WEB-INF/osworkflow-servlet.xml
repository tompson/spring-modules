<?xml version="1.0" encoding="ISO-8859-1"?>

<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">
<beans>

	<bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
		<property name="viewClass"><value>org.springframework.web.servlet.view.JstlView</value></property>
		<property name="prefix"><value>/WEB-INF/jsp/</value></property>
		<property name="suffix"><value>.jsp</value></property>
	</bean>

	<bean id="urlMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
		<property name="interceptors">
			<list>
				<ref local="callerInterceptor"/>
			</list>
		</property>
		<property name="mappings">
			<props>
				<prop key="/start">workflowController</prop>
				<prop key="/status">workflowController</prop>
				<prop key="/execute/upload">uploadDocumentForm</prop>
			</props>
		</property>
	</bean>
	
	<bean id="workflowController" class="org.springmodules.examples.workflow.osworkflow.web.DocumentApprovalController">
		  <property name="template">
				<ref bean="workflowTemplate"/>
		  </property>
		<property name="methodNameResolver">
			<ref local="resolver"/>
		</property>
	</bean>

	<bean id="uploadDocumentForm" class="org.springmodules.examples.workflow.osworkflow.web.UploadDocumentForm">
		<property name="template">
			<ref bean="workflowTemplate"/>
		</property>
	</bean>

	<bean id="resolver" class="org.springframework.web.servlet.mvc.multiaction.InternalPathMethodNameResolver"/>

	<bean id="callerInterceptor" class="org.springmodules.examples.workflow.osworkflow.web.CallerHandlerInterceptor">
		<property name="contextManager">
			<ref bean="workflowContextManager"/>
		</property>
	</bean>
</beans>